<body>
<style>
    html, body {
        margin: 0;
        padding: 0;
        width: 100%;
        height: 100%;
    }

    #canvas {
        border: 1px solid;
        width: 100%;
        height: 100%;
    }
</style>
<canvas id="canvas"></canvas>
<img src="textures/UV_Grid_Lrg.jpg" id="imgTex" hidden/>

<img src="textures/miramar_right.png" id="cube01_right" hidden>
<img src="textures/miramar_left.png" id="cube01_left" hidden>
<img src="textures/miramar_top.png" id="cube01_top" hidden>
<img src="textures/miramar_bottom.png" id="cube01_bottom" hidden>
<img src="textures/miramar_back.png" id="cube01_back" hidden>
<img src="textures/miramar_front.png" id="cube01_front" hidden>

<img src="textures/grimmnight_right.png" id="cube02_right" hidden>
<img src="textures/grimmnight_left.png" id="cube02_left" hidden>
<img src="textures/grimmnight_top.png" id="cube02_top" hidden>
<img src="textures/grimmnight_bottom.png" id="cube02_bottom" hidden>
<img src="textures/grimmnight_back.png" id="cube02_back" hidden>
<img src="textures/grimmnight_front.png" id="cube02_front" hidden>

<script id="vertex_shader" type="x-shader/x-vertex">#version 300 es
  in vec4 a_position;
  in vec3 a_norm;
  in vec2 a_uv;

  uniform mat4 uPMatrix;
  uniform mat4 uMVMatrix;
  uniform mat4 uCameraMatrix;

//  uniform vec3 uColor[6];
//  uniform float uTime;

  out lowp vec4 color;
  out highp vec2 texCoord; // Interpolate UV values to the fragment shader

//  vec3 warp(vec3 p) {
//      return p + 0.2 * abs(cos(uTime * 0.003 + p.y * 2.0 + p.x * 2.0 + p.z)) * a_norm;
//  }

  void main(void) {
      texCoord = a_uv;
//      color = vec4(uColor[int(a_position.w)], 1.0);
      gl_Position = uPMatrix * uCameraMatrix * uMVMatrix * vec4(a_position.xyz, 1.0);
  }
</script>
<script id="fragment_shader" type="x-shader/x-fragment">#version 300 es
  precision mediump float;

//  in vec4 color;
  in highp vec2 texCoord;
  uniform sampler2D uMainTex;

  out vec4 finalColor;

  void main(void) {
//    finalColor = mix(color, texture(uMainTex, texCoord), 0.8f);
    finalColor = texture(uMainTex, texCoord);
  }

</script>
<script id="sky_vshader" type="x-shader/x-vertex">#version 300 es
  in vec4 a_position;
  in vec2 a_uv;

  uniform mat4 uPMatrix;
  uniform mat4 uMVMatrix;
  uniform mat4 uCameraMatrix;

  out highp vec3 texCoord; // Interpolate UV values to the fragment shader

  void main(void) {
      texCoord = a_position.xyz;
      gl_Position = uPMatrix * uCameraMatrix * uMVMatrix * vec4(a_position.xyz, 1.0);
  }
</script>
<script id="sky_fshader" type="x-shader/x-fragment">#version 300 es
precision mediump float;

in highp vec3 texCoord;

uniform samplerCube uDayTex;
uniform samplerCube uNightTex;
uniform float uTime;

out vec4 finalColor;

void main(void) {
    finalColor = mix(texture(uDayTex, texCoord), texture(uNightTex, texCoord), abs(sin(uTime * 0.0005)));
}
</script>

<script type="text/plain" id="obj_file">
# Blender v2.76 (sub 0) OBJ File: 'cube.blend'
# www.blender.org
mtllib cube.mtl
o Cube
v 1.000000 -1.000000 -1.000000
v 1.000000 -1.000000 1.000000
v -1.000000 -1.000000 1.000000
v -1.000000 -1.000000 -1.000000
v 1.000000 1.000000 -0.999999
v 0.999999 1.000000 1.000001
v -1.000000 1.000000 1.000000
v -1.000000 1.000000 -1.000000
vt 1.000000 1.000000
vt 0.000000 1.000000
vt 0.000000 0.000000
vt 1.000000 0.000000
vn 0.000000 -1.000000 0.000000
vn 0.000000 1.000000 0.000000
vn 1.000000 0.000000 0.000000
vn -0.000000 0.000000 1.000000
vn -1.000000 -0.000000 -0.000000
vn 0.000000 0.000000 -1.000000
usemtl Material
s off
f 2/1/1 3/2/1 4/3/1
f 8/2/2 7/3/2 6/4/2
f 5/1/3 6/2/3 2/3/3
f 6/1/4 7/2/4 3/3/4
f 3/4/5 7/1/5 8/2/5
f 1/3/6 4/4/6 8/1/6
f 1/4/1 2/1/1 4/3/1
f 5/1/2 8/2/2 6/4/2
f 1/4/3 5/1/3 2/3/3
f 2/4/4 6/1/4 3/3/4
f 4/3/5 3/4/5 8/2/5
f 5/2/6 1/3/6 8/1/6
</script>

<script src="gl.js"></script>
<script src="shader.js"></script>
<script src="renderloop.js"></script>
<script src="model.js"></script>
<script src="primitives.js"></script>
<script src="math.js"></script>
<script src="transform.js"></script>
<script src="camera.js"></script>
<script src="shader_extra.js"></script>
<script src="objloader.js"></script>
<script src="index.js"></script>
</body>
